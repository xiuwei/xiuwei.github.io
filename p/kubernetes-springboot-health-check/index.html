<!doctype html><html lang=zh-Hans dir=ltr><head><meta charset=utf-8><meta name=viewport content='width=device-width,initial-scale=1'><meta name=description content="åœ¨ Kubernetes ç¯å¢ƒä¸­éƒ¨ç½² Spring Boot å¾®æœåŠ¡ï¼Œå¹¶é…ç½®å’Œå¥åº·æ£€æŸ¥ï¼Œä»¥ç¡®ä¿å¾®æœåŠ¡çš„å¯é æ€§å’Œç¨³å®šæ€§"><title>å®æˆ˜æŒ‡å—ï¼šåœ¨ Kubernetes ä¸Šéƒ¨ç½² Spring Boot å¾®æœåŠ¡å¹¶å®æ–½å¥åº·æ£€æŸ¥</title>
<link rel=canonical href=https://xiuwei.github.io/p/kubernetes-springboot-health-check/><link rel=stylesheet href=/scss/style.min.8e60baf4cd3fc55968717a6e39762f4d28ed7ef6007566b6c7970ad0fe907198.css><meta property='og:title' content="å®æˆ˜æŒ‡å—ï¼šåœ¨ Kubernetes ä¸Šéƒ¨ç½² Spring Boot å¾®æœåŠ¡å¹¶å®æ–½å¥åº·æ£€æŸ¥"><meta property='og:description' content="åœ¨ Kubernetes ç¯å¢ƒä¸­éƒ¨ç½² Spring Boot å¾®æœåŠ¡ï¼Œå¹¶é…ç½®å’Œå¥åº·æ£€æŸ¥ï¼Œä»¥ç¡®ä¿å¾®æœåŠ¡çš„å¯é æ€§å’Œç¨³å®šæ€§"><meta property='og:url' content='https://xiuwei.github.io/p/kubernetes-springboot-health-check/'><meta property='og:site_name' content='å“ˆçš®çš„è‡ªè¨€è‡ªè¯­'><meta property='og:type' content='article'><meta property='article:section' content='Post'><meta property='article:tag' content='Cloud Native'><meta property='article:tag' content='Kubernetes'><meta property='article:tag' content='Spring Boot'><meta property='article:tag' content='å¥åº·æ£€æŸ¥'><meta property='article:published_time' content='2024-04-20T21:00:00+00:00'><meta property='article:modified_time' content='2024-04-20T21:00:00+00:00'><meta property='og:image' content='https://xiuwei.github.io/p/kubernetes-springboot-health-check/cover.jpg'><meta name=twitter:site content="@@Willie_Lau"><meta name=twitter:creator content="@@Willie_Lau"><meta name=twitter:title content="å®æˆ˜æŒ‡å—ï¼šåœ¨ Kubernetes ä¸Šéƒ¨ç½² Spring Boot å¾®æœåŠ¡å¹¶å®æ–½å¥åº·æ£€æŸ¥"><meta name=twitter:description content="åœ¨ Kubernetes ç¯å¢ƒä¸­éƒ¨ç½² Spring Boot å¾®æœåŠ¡ï¼Œå¹¶é…ç½®å’Œå¥åº·æ£€æŸ¥ï¼Œä»¥ç¡®ä¿å¾®æœåŠ¡çš„å¯é æ€§å’Œç¨³å®šæ€§"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content='https://xiuwei.github.io/p/kubernetes-springboot-health-check/cover.jpg'><link rel="shortcut icon" href=/favicon.ico></head><body class=article-page><script>(function(){const e="StackColorScheme";localStorage.getItem(e)||localStorage.setItem(e,"auto")})()</script><script>(function(){const t="StackColorScheme",e=localStorage.getItem(t),n=window.matchMedia("(prefers-color-scheme: dark)").matches===!0;e=="dark"||e==="auto"&&n?document.documentElement.dataset.scheme="dark":document.documentElement.dataset.scheme="light"})()</script><div class="container main-container flex on-phone--column extended"><aside class="sidebar left-sidebar sticky"><button class="hamburger hamburger--spin" type=button id=toggle-menu aria-label=åˆ‡æ¢èœå•>
<span class=hamburger-box><span class=hamburger-inner></span></span></button><header><figure class=site-avatar><a href=/><img src=/img/avatar_huc21dbe1ce4b866464592b14304df5a25_40367_300x0_resize_q75_box.jpeg width=300 height=300 class=site-logo loading=lazy alt=Avatar>
</a><span class=emoji>ğŸ¥</span></figure><div class=site-meta><h1 class=site-name><a href=/>å“ˆçš®çš„è‡ªè¨€è‡ªè¯­</a></h1><h2 class=site-description>Entities should not be multiplied unnecessarily.</h2></div></header><ol class=menu id=main-menu><li><a href=/><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-home" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><polyline points="5 12 3 12 12 3 21 12 19 12"/><path d="M5 12v7a2 2 0 002 2h10a2 2 0 002-2v-7"/><path d="M9 21v-6a2 2 0 012-2h2a2 2 0 012 2v6"/></svg>
<span>ä¸»é¡µ</span></a></li><li><a href=/archives/><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-archive" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><rect x="3" y="4" width="18" height="4" rx="2"/><path d="M5 8v10a2 2 0 002 2h10a2 2 0 002-2V8"/><line x1="10" y1="12" x2="14" y2="12"/></svg>
<span>å½’æ¡£</span></a></li><li><a href=/search/><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-search" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="10" cy="10" r="7"/><line x1="21" y1="21" x2="15" y2="15"/></svg>
<span>æ£€ç´¢</span></a></li><li><a href=/about/><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-user" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="7" r="4"/><path d="M6 21v-2a4 4 0 014-4h4a4 4 0 014 4v2"/></svg>
<span>About</span></a></li><li class=menu-bottom-section><ol class=menu><li id=dark-mode-toggle><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-toggle-left" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="8" cy="12" r="2"/><rect x="2" y="6" width="20" height="12" rx="6"/></svg>
<svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-toggle-right" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="16" cy="12" r="2"/><rect x="2" y="6" width="20" height="12" rx="6"/></svg>
<span>æš—è‰²æ¨¡å¼</span></li></ol></li></ol></aside><aside class="sidebar right-sidebar sticky"><section class="widget archives"><div class=widget-icon><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-hash" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><line x1="5" y1="9" x2="19" y2="9"/><line x1="5" y1="15" x2="19" y2="15"/><line x1="11" y1="4" x2="7" y2="20"/><line x1="17" y1="4" x2="13" y2="20"/></svg></div><h2 class="widget-title section-title">ç›®å½•</h2><div class=widget--toc><nav id=TableOfContents><ol><li><a href=#1-å¼•è¨€>1. å¼•è¨€</a></li><li><a href=#2-åŸç†>2. åŸç†</a><ol><li><a href=#21-kuberneteså¥åº·æ£€æŸ¥æœºåˆ¶>2.1 Kuberneteså¥åº·æ£€æŸ¥æœºåˆ¶</a><ol><li><a href=#211-æ¢é’ˆç±»å‹>2.1.1 æ¢é’ˆç±»å‹</a></li><li><a href=#212-æ¢é’ˆç»“æœ>2.1.2 æ¢é’ˆç»“æœ</a></li><li><a href=#213-æ¢é’ˆæ£€æŸ¥æœºåˆ¶>2.1.3 æ¢é’ˆæ£€æŸ¥æœºåˆ¶</a></li></ol></li><li><a href=#22-spring-bootå¯¹kuberneteså®¹å™¨æ¢é’ˆçš„æ”¯æŒ>2.2 Spring Bootå¯¹Kuberneteså®¹å™¨æ¢é’ˆçš„æ”¯æŒ</a><ol><li><a href=#221-spring-boot-å¦‚ä½•è¯†åˆ«k8sç¯å¢ƒ>2.2.1 Spring Boot å¦‚ä½•è¯†åˆ«k8sç¯å¢ƒ</a></li><li><a href=#222-spring-boot-ä¸k8så®¹å™¨æ¢é’ˆçš„ç»“åˆ>2.2.2 Spring Boot ä¸k8så®¹å™¨æ¢é’ˆçš„ç»“åˆ</a></li><li><a href=#223-spring-boot-ç”Ÿå‘½å‘¨æœŸä¸æ¢æµ‹çŠ¶æ€>2.2.3 Spring Boot ç”Ÿå‘½å‘¨æœŸä¸æ¢æµ‹çŠ¶æ€</a></li></ol></li></ol></li><li><a href=#3-å‡†å¤‡å·¥ä½œ>3. å‡†å¤‡å·¥ä½œ</a></li><li><a href=#4-åœ¨-kubernetes-ä¸­éƒ¨ç½²-spring-boot-å¾®æœåŠ¡>4. åœ¨ Kubernetes ä¸­éƒ¨ç½² Spring Boot å¾®æœåŠ¡</a></li><li><a href=#5-é…ç½®å¥åº·æ£€æŸ¥>5. é…ç½®å¥åº·æ£€æŸ¥</a></li><li><a href=#6-éªŒè¯>6. éªŒè¯</a></li><li><a href=#7-æ€»ç»“>7. æ€»ç»“</a></li><li><a href=#å‚è€ƒèµ„æ–™>å‚è€ƒèµ„æ–™</a></li></ol></nav></div></section></aside><main class="main full-width"><article class="has-image main-article"><header class=article-header><div class=article-image><a href=/p/kubernetes-springboot-health-check/><img src=/p/kubernetes-springboot-health-check/cover_hu5459c0360c2b0cb7a147d2df0eb350ca_1001946_800x0_resize_q75_box.jpg srcset="/p/kubernetes-springboot-health-check/cover_hu5459c0360c2b0cb7a147d2df0eb350ca_1001946_800x0_resize_q75_box.jpg 800w, /p/kubernetes-springboot-health-check/cover_hu5459c0360c2b0cb7a147d2df0eb350ca_1001946_1600x0_resize_q75_box.jpg 1600w" width=800 height=450 loading=lazy alt="Featured image of post å®æˆ˜æŒ‡å—ï¼šåœ¨ Kubernetes ä¸Šéƒ¨ç½² Spring Boot å¾®æœåŠ¡å¹¶å®æ–½å¥åº·æ£€æŸ¥"></a></div><div class=article-details><header class=article-category><a href=/categories/cloud-native/>Cloud Native
</a><a href=/categories/microservice/>Microservice</a></header><div class=article-title-wrapper><h2 class=article-title><a href=/p/kubernetes-springboot-health-check/>å®æˆ˜æŒ‡å—ï¼šåœ¨ Kubernetes ä¸Šéƒ¨ç½² Spring Boot å¾®æœåŠ¡å¹¶å®æ–½å¥åº·æ£€æŸ¥</a></h2><h3 class=article-subtitle>åœ¨ Kubernetes ç¯å¢ƒä¸­éƒ¨ç½² Spring Boot å¾®æœåŠ¡ï¼Œå¹¶é…ç½®å’Œå¥åº·æ£€æŸ¥ï¼Œä»¥ç¡®ä¿å¾®æœåŠ¡çš„å¯é æ€§å’Œç¨³å®šæ€§</h3></div><footer class=article-time><div><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-calendar-time" width="56" height="56" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><path d="M11.795 21H5a2 2 0 01-2-2V7a2 2 0 012-2h12a2 2 0 012 2v4"/><circle cx="18" cy="18" r="4"/><path d="M15 3v4"/><path d="M7 3v4"/><path d="M3 11h16"/><path d="M18 16.496V18l1 1"/></svg>
<time class=article-time--published>Apr 20, 2024</time></div><div><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-clock" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="12" r="9"/><polyline points="12 7 12 12 15 15"/></svg>
<time class=article-time--reading>é˜…è¯»æ—¶é•¿: 8 åˆ†é’Ÿ</time></div></footer></div></header><section class=article-content><h2 id=1-å¼•è¨€><a href=#1-%e5%bc%95%e8%a8%80>#</a>
1. å¼•è¨€</h2><p>åœ¨äº‘åŸç”Ÿåº”ç”¨å¼€å‘ä¸­ï¼Œå¥åº·æ£€æŸ¥æ˜¯ç¡®ä¿å¾®æœåŠ¡å¯é æ€§å’Œç¨³å®šæ€§çš„å…³é”®ç¯èŠ‚ã€‚ç‰¹åˆ«æ˜¯åœ¨ Kubernetes è¿™æ ·çš„å®¹å™¨ç¼–æ’å¹³å°ä¸Šï¼Œé€šè¿‡å¥åº·æ£€æŸ¥å¯ä»¥æœ‰æ•ˆåœ°ç›‘æ§å’Œç®¡ç†åº”ç”¨ç¨‹åºçš„çŠ¶æ€ï¼ŒåŠæ—¶å‘ç°å¹¶å¤„ç†æ½œåœ¨çš„æ•…éšœæƒ…å†µï¼Œä»è€Œç¡®ä¿æ•´ä¸ªç³»ç»Ÿçš„æ­£å¸¸è¿è¡Œã€‚</p><p>è€Œ Spring Boot ä½œä¸ºä¸€ç§æµè¡Œçš„ Java å¾®æœåŠ¡æ¡†æ¶ï¼Œå…¶åœ¨ Kubernetes ä¸Šçš„éƒ¨ç½²å’Œå¥åº·æ£€æŸ¥é…ç½®ä¹Ÿæ˜¯å¼€å‘è€…ä»¬å…³æ³¨çš„ç„¦ç‚¹ã€‚æœ¬æ–‡å°†é’ˆå¯¹è¿™ä¸€é—®é¢˜ï¼Œæä¾›ä¸€å¥—å®Œæ•´çš„å®æˆ˜æŒ‡å—ï¼Œå¸®åŠ©è¯»è€…æ·±å…¥äº†è§£åœ¨ Kubernetes ç¯å¢ƒä¸­éƒ¨ç½² Spring Boot å¾®æœåŠ¡å¹¶å®æ–½å¥åº·æ£€æŸ¥çš„æ­¥éª¤å’Œæ–¹æ³•ã€‚</p><h2 id=2-åŸç†><a href=#2-%e5%8e%9f%e7%90%86>#</a>
2. åŸç†</h2><h3 id=21-kuberneteså¥åº·æ£€æŸ¥æœºåˆ¶><a href=#21-kubernetes%e5%81%a5%e5%ba%b7%e6%a3%80%e6%9f%a5%e6%9c%ba%e5%88%b6>#</a>
2.1 Kuberneteså¥åº·æ£€æŸ¥æœºåˆ¶</h3><p>Kubernetesä¸­çš„å¥åº·æ£€æŸ¥ä¸»è¦ä½¿ç”¨ å°±ç»ªæ€§æ¢é’ˆ <code>readinessProbe</code> ã€å­˜æ´»æ€§æ¢é’ˆ <code>livenessProbe</code> å’Œå¯åŠ¨æ¢é’ˆ <code>startupProbe</code> æ¥å®ç°ï¼Œserviceå³ä¸ºè´Ÿè½½å‡è¡¡ï¼Œk8sä¿è¯ service åé¢çš„ pod éƒ½å¯ç”¨ï¼Œæ˜¯k8sä¸­è‡ªæ„ˆèƒ½åŠ›çš„ä¸»è¦æ‰‹æ®µï¼Œä¸»è¦åŸºäºè¿™ä¸¤ç§æ¢æµ‹æœºåˆ¶ï¼Œå¯ä»¥å®ç°å¦‚ä¸‹éœ€æ±‚ï¼š</p><ul><li>å¼‚å¸¸å®ä¾‹è‡ªåŠ¨å‰”é™¤ï¼Œå¹¶é‡å¯æ–°å®ä¾‹ã€‚</li><li>å¤šç§ç±»å‹æ¢é’ˆæ£€æµ‹ï¼Œä¿è¯å¼‚å¸¸podä¸æ¥å…¥æµé‡ã€‚</li><li>ä¸åœæœºéƒ¨ç½²ï¼Œæ›´å®‰å…¨çš„æ»šåŠ¨å‡çº§ã€‚</li></ul><h4 id=211-æ¢é’ˆç±»å‹><a href=#211-%e6%8e%a2%e9%92%88%e7%b1%bb%e5%9e%8b>#</a>
2.1.1 æ¢é’ˆç±»å‹</h4><p>é’ˆå¯¹è¿è¡Œä¸­çš„å®¹å™¨ï¼Œ<code>kubelet</code> å¯ä»¥é€‰æ‹©æ˜¯å¦æ‰§è¡Œä»¥ä¸‹ä¸‰ç§æ¢é’ˆï¼Œä»¥åŠå¦‚ä½•é’ˆå¯¹æ¢æµ‹ç»“æœä½œå‡ºååº”ï¼š</p><ul><li><strong>livenessProbe:</strong> æŒ‡ç¤ºå®¹å™¨æ˜¯å¦æ­£åœ¨è¿è¡Œã€‚å¦‚æœå­˜æ´»æ€æ¢æµ‹å¤±è´¥ï¼Œåˆ™ kubelet ä¼šæ€æ­»å®¹å™¨ï¼Œ å¹¶ä¸”å®¹å™¨å°†æ ¹æ®å…¶<code>é‡å¯ç­–ç•¥</code>è¿›è¡Œé‡å¯ã€‚å¦‚æœå®¹å™¨ä¸æä¾›å­˜æ´»æ¢é’ˆï¼Œåˆ™é»˜è®¤çŠ¶æ€ä¸º Successã€‚</li><li><strong>readinessProbe:</strong> æŒ‡ç¤ºå®¹å™¨æ˜¯å¦å‡†å¤‡å¥½ä¸ºè¯·æ±‚æä¾›æœåŠ¡ã€‚å¦‚æœå°±ç»ªæ€æ¢æµ‹å¤±è´¥ï¼Œ ç«¯ç‚¹æ§åˆ¶å™¨å°†ä»ä¸ Pod åŒ¹é…çš„æ‰€æœ‰æœåŠ¡çš„ç«¯ç‚¹åˆ—è¡¨ä¸­åˆ é™¤è¯¥ Pod çš„ IP åœ°å€ã€‚åˆå§‹å»¶è¿Ÿä¹‹å‰çš„å°±ç»ªæ€çš„çŠ¶æ€å€¼é»˜è®¤ä¸º <code>Failure</code>ã€‚ å¦‚æœå®¹å™¨ä¸æä¾›å°±ç»ªæ€æ¢é’ˆï¼Œåˆ™é»˜è®¤çŠ¶æ€ä¸º <code>Successã€‚</code></li><li><strong>startupProbe:</strong> æŒ‡ç¤ºå®¹å™¨ä¸­çš„åº”ç”¨æ˜¯å¦å·²ç»å¯åŠ¨ã€‚å¦‚æœæä¾›äº†å¯åŠ¨æ¢é’ˆï¼Œåˆ™æ‰€æœ‰å…¶ä»–æ¢é’ˆéƒ½ä¼šè¢« ç¦ç”¨ï¼Œç›´åˆ°æ­¤æ¢é’ˆæˆåŠŸä¸ºæ­¢ã€‚å¦‚æœå¯åŠ¨æ¢æµ‹å¤±è´¥ï¼Œkubelet å°†æ€æ­»å®¹å™¨ï¼Œè€Œå®¹å™¨ä¾å…¶<code>é‡å¯ç­–ç•¥</code>è¿›è¡Œé‡å¯ã€‚ å¦‚æœå®¹å™¨æ²¡æœ‰æä¾›å¯åŠ¨æ¢æµ‹ï¼Œåˆ™é»˜è®¤çŠ¶æ€ä¸º <code>Successã€‚</code></li></ul><h4 id=212-æ¢é’ˆç»“æœ><a href=#212-%e6%8e%a2%e9%92%88%e7%bb%93%e6%9e%9c>#</a>
2.1.2 æ¢é’ˆç»“æœ</h4><p>æ¯æ¬¡æ¢æµ‹éƒ½å°†è·å¾—ä»¥ä¸‹ä¸‰ç§ç»“æœä¹‹ä¸€ï¼š</p><ul><li><strong>Successï¼ˆæˆåŠŸï¼‰:</strong> å®¹å™¨é€šè¿‡äº†è¯Šæ–­ã€‚</li><li><strong>Failureï¼ˆå¤±è´¥ï¼‰:</strong> å®¹å™¨æœªé€šè¿‡è¯Šæ–­ã€‚</li><li><strong>Unknownï¼ˆæœªçŸ¥ï¼‰:</strong> è¯Šæ–­å¤±è´¥ï¼Œå› æ­¤ä¸ä¼šé‡‡å–ä»»ä½•è¡ŒåŠ¨ã€‚</li></ul><h4 id=213-æ¢é’ˆæ£€æŸ¥æœºåˆ¶><a href=#213-%e6%8e%a2%e9%92%88%e6%a3%80%e6%9f%a5%e6%9c%ba%e5%88%b6>#</a>
2.1.3 æ¢é’ˆæ£€æŸ¥æœºåˆ¶</h4><p>ä½¿ç”¨æ¢é’ˆæ¥æ£€æŸ¥å®¹å™¨æœ‰å››ç§ä¸åŒçš„æ–¹æ³•ã€‚ æ¯ä¸ªæ¢é’ˆéƒ½å¿…é¡»å‡†ç¡®å®šä¹‰ä¸ºè¿™å››ç§æœºåˆ¶ä¸­çš„ä¸€ç§ï¼š</p><ul><li><strong>execï¼š</strong> åœ¨å®¹å™¨å†…æ‰§è¡ŒæŒ‡å®šå‘½ä»¤ã€‚å¦‚æœå‘½ä»¤é€€å‡ºæ—¶è¿”å›ç ä¸º 0 åˆ™è®¤ä¸ºè¯Šæ–­æˆåŠŸã€‚</li><li><strong>grpcï¼š</strong> ä½¿ç”¨ gRPC æ‰§è¡Œä¸€ä¸ªè¿œç¨‹è¿‡ç¨‹è°ƒç”¨ã€‚ ç›®æ ‡åº”è¯¥å®ç° gRPC å¥åº·æ£€æŸ¥ã€‚ å¦‚æœå“åº”çš„çŠ¶æ€æ˜¯ &ldquo;SERVING&rdquo;ï¼Œåˆ™è®¤ä¸ºè¯Šæ–­æˆåŠŸã€‚</li><li><strong>httpGetï¼š</strong> å¯¹å®¹å™¨çš„ IP åœ°å€ä¸ŠæŒ‡å®šç«¯å£å’Œè·¯å¾„æ‰§è¡Œ HTTP GET è¯·æ±‚ã€‚å¦‚æœå“åº”çš„çŠ¶æ€ç å¤§äºç­‰äº 200 ä¸”å°äº 400ï¼Œåˆ™è¯Šæ–­è¢«è®¤ä¸ºæ˜¯æˆåŠŸçš„ã€‚</li><li><strong>tcpSocketï¼š</strong> å¯¹å®¹å™¨çš„ IP åœ°å€ä¸Šçš„æŒ‡å®šç«¯å£æ‰§è¡Œ TCP æ£€æŸ¥ã€‚å¦‚æœç«¯å£æ‰“å¼€ï¼Œåˆ™è¯Šæ–­è¢«è®¤ä¸ºæ˜¯æˆåŠŸçš„ã€‚ å¦‚æœè¿œç¨‹ç³»ç»Ÿï¼ˆå®¹å™¨ï¼‰åœ¨æ‰“å¼€è¿æ¥åç«‹å³å°†å…¶å…³é—­ï¼Œè¿™ç®—ä½œæ˜¯å¥åº·çš„ã€‚</li></ul><h3 id=22-spring-bootå¯¹kuberneteså®¹å™¨æ¢é’ˆçš„æ”¯æŒ><a href=#22-spring-boot%e5%af%b9kubernetes%e5%ae%b9%e5%99%a8%e6%8e%a2%e9%92%88%e7%9a%84%e6%94%af%e6%8c%81>#</a>
2.2 Spring Bootå¯¹Kuberneteså®¹å™¨æ¢é’ˆçš„æ”¯æŒ</h3><p>Spring Boot 2.3 ç‰ˆæœ¬å¼•å…¥äº†å®¹å™¨æ¢é’ˆåŠŸèƒ½ï¼Œå…¶ä¸­åŒ…æ‹¬äº† <code>/actuator/health/liveness</code> å’Œ <code>/actuator/health/readiness</code> è¿™ä¸¤ä¸ªå¥åº·æ£€æŸ¥è·¯å¾„ã€‚è¿™äº›è·¯å¾„æ˜¯ä¸ºäº†æ›´å¥½åœ°æ”¯æŒéƒ¨ç½²åœ¨ Kubernetes ç­‰å®¹å™¨ç¯å¢ƒä¸­çš„åº”ç”¨ç¨‹åºã€‚</p><ul><li><code>/actuator/health/liveness</code> ç”¨äºå­˜æ´»æ€§æ£€æŸ¥ï¼Œç”¨äºç¡®å®šåº”ç”¨ç¨‹åºæ˜¯å¦ä»ç„¶åœ¨è¿è¡Œã€‚</li><li><code>/actuator/health/readiness</code> ç”¨äºå°±ç»ªæ€§æ£€æŸ¥ï¼Œç”¨äºç¡®å®šåº”ç”¨ç¨‹åºæ˜¯å¦å‡†å¤‡å¥½æ¥æ”¶æµé‡ã€‚</li></ul><p>Spring Boot Actuator ä¼šè‡ªåŠ¨å°†è¿™ä¸¤ä¸ªè·¯å¾„æš´éœ²å‡ºæ¥ï¼Œå¹¶é€šè¿‡å®ƒä»¬æ¥æ‰§è¡Œç›¸åº”çš„å¥åº·æ£€æŸ¥ã€‚è¿™æ ·ï¼Œå½“ä½ åœ¨ Kubernetes ä¸­éƒ¨ç½² Spring Boot åº”ç”¨ç¨‹åºæ—¶ï¼ŒKubernetes å¯ä»¥åˆ©ç”¨è¿™äº›è·¯å¾„æ¥ç¡®å®šå®¹å™¨æ˜¯å¦å¥åº·å’Œå‡†å¤‡å¥½æ¥æ”¶æµé‡ã€‚</p><p>è¿™ç§é›†æˆç®€åŒ–äº†åœ¨ Kubernetes ä¸­éƒ¨ç½² Spring Boot åº”ç”¨ç¨‹åºçš„æµç¨‹ï¼Œå¹¶æé«˜äº†åº”ç”¨ç¨‹åºçš„å¯é æ€§å’Œå¯ç”¨æ€§ã€‚</p><h4 id=221-spring-boot-å¦‚ä½•è¯†åˆ«k8sç¯å¢ƒ><a href=#221-spring-boot-%e5%a6%82%e4%bd%95%e8%af%86%e5%88%abk8s%e7%8e%af%e5%a2%83>#</a>
2.2.1 Spring Boot å¦‚ä½•è¯†åˆ«k8sç¯å¢ƒ</h4><p>Spring Boot é€šè¿‡æ£€æŸ¥ç¯å¢ƒä¸­çš„ <code>"*_SERVICE_HOST"</code> å’Œ <code>"*_SERVICE_PORT"</code> å˜é‡æ¥è‡ªåŠ¨æ£€æµ‹ Kubernetes éƒ¨ç½²ç¯å¢ƒã€‚ä¹Ÿå¯ä»¥ä½¿ç”¨ <code>spring.main.cloud-platform</code> é…ç½®å±æ€§è¦†ç›–æ­¤æ£€æµ‹ã€‚</p><p>Spring Boot è¯†åˆ«åˆ° Kubernetes ç¯å¢ƒåï¼ŒSpring Boot Actuator ä¼šè‡ªåŠ¨å°†<code>/actuator/health/liveness</code> å’Œ <code>/actuator/health/readiness</code>è¿™ä¸¤ä¸ªç«¯ç‚¹æš´éœ²å‡ºæ¥ã€‚</p><blockquote><p>å°æŠ€å·§ï¼šæœ¬åœ°éªŒè¯è¿™ä¸€ç‰¹æ€§å¯ä»¥é€šè¿‡æ‰‹åŠ¨è®¾ç½® <em>KUBERNETES_SERVICE_HOST</em> å’Œ <em>KUBERNETES_SERVICE_PORT</em> è¿™ä¸¤ä¸ªç¯å¢ƒå˜é‡æ¥å¼€å¯å­˜æ´»å’Œå°±ç»ªæ£€æŸ¥ã€‚è®¿é—® <em>http://localhost:8080/actuator/health/liveness</em> å“åº”200çŠ¶æ€ç æ—¶ä»£è¡¨å·²å¼€å¯ã€‚</p></blockquote><h4 id=222-spring-boot-ä¸k8så®¹å™¨æ¢é’ˆçš„ç»“åˆ><a href=#222-spring-boot-%e4%b8%8ek8s%e5%ae%b9%e5%99%a8%e6%8e%a2%e9%92%88%e7%9a%84%e7%bb%93%e5%90%88>#</a>
2.2.2 Spring Boot ä¸k8så®¹å™¨æ¢é’ˆçš„ç»“åˆ</h4><p>é»˜è®¤æƒ…å†µä¸‹ï¼ŒSpring Boot ç®¡ç†åº”ç”¨ç¨‹åºå¯ç”¨æ€§çŠ¶æ€ã€‚å¦‚æœéƒ¨ç½²åœ¨ Kubernetes ç¯å¢ƒä¸­ï¼ŒActuator ä¼šä»æ”¶é›†â€œLivenessâ€å’Œâ€œReadinessâ€ä¿¡æ¯ï¼Œå¹¶å°†è¯¥ä¿¡æ¯ç”¨äºå„ç±»ä¸“ç”¨çš„ <code>HealthIndicators</code>ã€‚</p><p>Kubernetes å­˜æ´»ä¸å°±ç»ªæ£€æŸ¥é…ç½®ç¤ºä¾‹ï¼š</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=nt>livenessProbe</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>httpGet</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>path</span><span class=p>:</span><span class=w> </span><span class=s2>&#34;/actuator/health/liveness&#34;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>port</span><span class=p>:</span><span class=w> </span><span class=l>&lt;actuator-port&gt;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>failureThreshold</span><span class=p>:</span><span class=w> </span><span class=l>...</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>periodSeconds</span><span class=p>:</span><span class=w> </span><span class=l>...</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>readinessProbe</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>httpGet</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>path</span><span class=p>:</span><span class=w> </span><span class=s2>&#34;/actuator/health/readiness&#34;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>port</span><span class=p>:</span><span class=w> </span><span class=l>&lt;actuator-port&gt;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>failureThreshold</span><span class=p>:</span><span class=w> </span><span class=l>...</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>periodSeconds</span><span class=p>:</span><span class=w> </span><span class=l>...</span><span class=w>
</span></span></span></code></pre></td></tr></table></div></div><blockquote><p><actuator-port>åº”è®¾ç½®ä¸º actuator endpoints çš„ç«¯å£ã€‚å®ƒå¯èƒ½æ˜¯ Web æœåŠ¡å™¨ç«¯å£æˆ–ä¸º Actuator å•ç‹¬è®¾ç½®çš„ç«¯å£ã€‚é€šè¿‡ &ldquo;management.server.port&rdquo; é…ç½®æŒ‡å®šã€‚</p></blockquote><h4 id=223-spring-boot-ç”Ÿå‘½å‘¨æœŸä¸æ¢æµ‹çŠ¶æ€><a href=#223-spring-boot-%e7%94%9f%e5%91%bd%e5%91%a8%e6%9c%9f%e4%b8%8e%e6%8e%a2%e6%b5%8b%e7%8a%b6%e6%80%81>#</a>
2.2.3 Spring Boot ç”Ÿå‘½å‘¨æœŸä¸æ¢æµ‹çŠ¶æ€</h4><p>Kubernetes Probes æ”¯æŒçš„ä¸€ä¸ªé‡è¦æ–¹é¢æ˜¯å®ƒä¸åº”ç”¨ç¨‹åºç”Ÿå‘½å‘¨æœŸçš„ä¸€è‡´æ€§ã€‚ï¼ˆåº”ç”¨ç¨‹åºçš„å†…å­˜ä¸­å†…éƒ¨çŠ¶æ€ï¼‰å’Œå®é™…æ¢é’ˆï¼ˆå…¬å¼€è¯¥çŠ¶æ€ï¼‰ä¹‹é—´å­˜åœ¨æ˜¾ç€å·®å¼‚ã€‚æ ¹æ®åº”ç”¨ç¨‹åºç”Ÿå‘½å‘¨æœŸçš„é˜¶æ®µï¼Œæ¢æµ‹å™¨å¯èƒ½ä¸å¯ç”¨ã€‚</p><p>Spring Boot åœ¨å¯åŠ¨å’Œå…³é—­æœŸé—´å‘å¸ƒ <em>Application Events</em>ï¼Œæ¢æµ‹å™¨å¯ä»¥ç›‘å¬æ­¤ç±»äº‹ä»¶å¹¶æš´éœ² <em>AvailabilityState</em> ä¿¡æ¯ã€‚</p><p>ä¸‹è¡¨æ˜¾ç¤ºäº†AvailabilityStateå’ŒHTTPè¿æ¥å™¨åœ¨ä¸åŒé˜¶æ®µçš„çŠ¶æ€ã€‚</p><p>å½“ Spring Boot åº”ç”¨ç¨‹åºå¯åŠ¨æ—¶ï¼š
<img src=/p/kubernetes-springboot-health-check/image.png width=1990 height=542 srcset="/p/kubernetes-springboot-health-check/image_hub8d9176f3a8360729b7465a357c86566_137478_480x0_resize_box_3.png 480w, /p/kubernetes-springboot-health-check/image_hub8d9176f3a8360729b7465a357c86566_137478_1024x0_resize_box_3.png 1024w" loading=lazy alt="alt text" class=gallery-image data-flex-grow=367 data-flex-basis=881px></p><p>å½“ Spring Boot åº”ç”¨ç¨‹åº å…³é—­æ—¶:
<img src=/p/kubernetes-springboot-health-check/image-1.png width=1948 height=498 srcset="/p/kubernetes-springboot-health-check/image-1_hu05efa868d7dab2ee38f7d14b4f8433cc_122400_480x0_resize_box_3.png 480w, /p/kubernetes-springboot-health-check/image-1_hu05efa868d7dab2ee38f7d14b4f8433cc_122400_1024x0_resize_box_3.png 1024w" loading=lazy alt="alt text" class=gallery-image data-flex-grow=391 data-flex-basis=938px></p><h2 id=3-å‡†å¤‡å·¥ä½œ><a href=#3-%e5%87%86%e5%a4%87%e5%b7%a5%e4%bd%9c>#</a>
3. å‡†å¤‡å·¥ä½œ</h2><p>åœ¨å¼€å§‹éƒ¨ç½² Spring Boot å¾®æœåŠ¡åˆ° Kubernetes ä¹‹å‰ï¼Œæˆ‘ä»¬é¦–å…ˆéœ€è¦å‡†å¤‡å¥½ä»¥ä¸‹å·¥ä½œç¯å¢ƒå’Œæ‰€éœ€å·¥å…·ï¼š</p><ul><li>ä¸€ä¸ªè¿è¡Œæ­£å¸¸çš„ Kubernetes é›†ç¾¤ï¼Œå¯ä»¥æ˜¯æœ¬åœ°çš„ minikube é›†ç¾¤æˆ–è€…äº‘ä¸Šçš„æ‰˜ç®¡ Kubernetes æœåŠ¡ã€‚</li><li>å·²ç»æ„å»ºå¥½çš„ Spring Boot åº”ç”¨ç¨‹åºçš„ Docker é•œåƒï¼Œå¯ä»¥é€šè¿‡ Dockerfile æ„å»ºï¼Œæˆ–è€…ä½¿ç”¨ Maven æ’ä»¶å’Œ Docker æ’ä»¶ç›´æ¥æ„å»ºã€‚</li><li>Kubernetes éƒ¨ç½²å’ŒæœåŠ¡èµ„æºçš„ YAML é…ç½®æ–‡ä»¶ï¼Œç”¨äºå®šä¹‰åº”ç”¨ç¨‹åºçš„éƒ¨ç½²ã€æœåŠ¡å’Œå¥åº·æ£€æŸ¥é…ç½®ã€‚</li></ul><h2 id=4-åœ¨-kubernetes-ä¸­éƒ¨ç½²-spring-boot-å¾®æœåŠ¡><a href=#4-%e5%9c%a8-kubernetes-%e4%b8%ad%e9%83%a8%e7%bd%b2-spring-boot-%e5%be%ae%e6%9c%8d%e5%8a%a1>#</a>
4. åœ¨ Kubernetes ä¸­éƒ¨ç½² Spring Boot å¾®æœåŠ¡</h2><p>åœ¨å‡†å¤‡å·¥ä½œå®Œæˆä¹‹åï¼Œæˆ‘ä»¬å°±å¯ä»¥å¼€å§‹åœ¨ Kubernetes ä¸­éƒ¨ç½² Spring Boot å¾®æœåŠ¡äº†ã€‚é¦–å…ˆï¼Œæˆ‘ä»¬éœ€è¦åˆ›å»ºä¸€ä¸ª Kubernetes éƒ¨ç½²èµ„æºï¼Œç”¨æ¥æè¿°åº”ç”¨ç¨‹åºçš„å®¹å™¨é•œåƒã€å‰¯æœ¬æ•°ç­‰ä¿¡æ¯ã€‚æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å†åˆ›å»ºä¸€ä¸ª Kubernetes æœåŠ¡èµ„æºï¼Œç”¨æ¥æš´éœ²åº”ç”¨ç¨‹åºçš„ç½‘ç»œç«¯å£ï¼Œä»¥ä¾¿å…¶ä»–æœåŠ¡å¯ä»¥è®¿é—®åˆ°è¯¥åº”ç”¨ç¨‹åºã€‚è®©æˆ‘ä»¬ä¸€èµ·æ¥çœ‹çœ‹å…·ä½“çš„æ“ä½œæ­¥éª¤ï¼š</p><ul><li><strong>åˆ›å»º Kubernetes éƒ¨ç½²èµ„æºï¼š</strong> åœ¨ Kubernetes ä¸­ï¼Œéƒ¨ç½²èµ„æºç”¨äºå®šä¹‰åº”ç”¨ç¨‹åºçš„éƒ¨ç½²ç­–ç•¥å’Œè¿è¡Œé…ç½®ã€‚æˆ‘ä»¬å¯ä»¥é€šè¿‡ä¸€ä¸ª YAML é…ç½®æ–‡ä»¶æ¥åˆ›å»ºä¸€ä¸ªéƒ¨ç½²èµ„æºï¼Œç¤ºä¾‹é…ç½®æ–‡ä»¶å¦‚ä¸‹æ‰€ç¤ºï¼š</li></ul><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=nt>apiVersion</span><span class=p>:</span><span class=w> </span><span class=l>apps/v1</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>kind</span><span class=p>:</span><span class=w> </span><span class=l>Deployment</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>metadata</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>my-springboot-app</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>spec</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>replicas</span><span class=p>:</span><span class=w> </span><span class=m>3</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>selector</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>matchLabels</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>app</span><span class=p>:</span><span class=w> </span><span class=l>my-springboot-app</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>template</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>metadata</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>labels</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>app</span><span class=p>:</span><span class=w> </span><span class=l>my-springboot-app</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>spec</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>containers</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>my-springboot-app</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>image</span><span class=p>:</span><span class=w> </span><span class=l>your-docker-registry/my-springboot-app:latest</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>ports</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span>- <span class=nt>containerPort</span><span class=p>:</span><span class=w> </span><span class=m>8080</span><span class=w>
</span></span></span></code></pre></td></tr></table></div></div><p>åœ¨è¿™ä¸ªç¤ºä¾‹ä¸­ï¼Œæˆ‘ä»¬å®šä¹‰äº†ä¸€ä¸ªåä¸º <code>my-springboot-app</code> çš„ Deployment èµ„æºï¼ŒæŒ‡å®šäº†è¦è¿è¡Œçš„å®¹å™¨é•œåƒå’Œå‰¯æœ¬æ•°ï¼Œå¹¶æš´éœ²äº†å®¹å™¨çš„ 8080 ç«¯å£ã€‚</p><ul><li><strong>åˆ›å»º Kubernetes æœåŠ¡èµ„æºï¼š</strong> åœ¨ Kubernetes ä¸­ï¼ŒæœåŠ¡èµ„æºç”¨äºå®šä¹‰åº”ç”¨ç¨‹åºçš„ç½‘ç»œè®¿é—®æ–¹å¼å’Œè´Ÿè½½å‡è¡¡ç­–ç•¥ã€‚æˆ‘ä»¬åŒæ ·å¯ä»¥é€šè¿‡ä¸€ä¸ª YAML é…ç½®æ–‡ä»¶æ¥åˆ›å»ºä¸€ä¸ªæœåŠ¡èµ„æºï¼Œç¤ºä¾‹é…ç½®æ–‡ä»¶å¦‚ä¸‹æ‰€ç¤ºï¼š</li></ul><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=nt>apiVersion</span><span class=p>:</span><span class=w> </span><span class=l>v1</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>kind</span><span class=p>:</span><span class=w> </span><span class=l>Service</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>metadata</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>my-springboot-app-service</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>spec</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>selector</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>app</span><span class=p>:</span><span class=w> </span><span class=l>my-springboot-app</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>ports</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=nt>protocol</span><span class=p>:</span><span class=w> </span><span class=l>TCP</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>port</span><span class=p>:</span><span class=w> </span><span class=m>80</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>targetPort</span><span class=p>:</span><span class=w> </span><span class=m>8080</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>type</span><span class=p>:</span><span class=w> </span><span class=l>LoadBalancer</span><span class=w>
</span></span></span></code></pre></td></tr></table></div></div><p>åœ¨è¿™ä¸ªç¤ºä¾‹ä¸­ï¼Œæˆ‘ä»¬å®šä¹‰äº†ä¸€ä¸ªåä¸º <code>my-springboot-app-service</code> çš„ Service èµ„æºï¼Œé€šè¿‡ <code>selector</code> å­—æ®µæŒ‡å®šäº†è¦è´Ÿè½½å‡è¡¡çš„ Deploymentï¼Œå¹¶å°†å®¹å™¨çš„ 8080 ç«¯å£æ˜ å°„åˆ°äº†æœåŠ¡çš„ 80 ç«¯å£ã€‚</p><p>é€šè¿‡ä¸Šè¿°æ­¥éª¤ï¼Œæˆ‘ä»¬å°±å¯ä»¥æˆåŠŸåœ°åœ¨ Kubernetes ä¸­éƒ¨ç½²äº†ä¸€ä¸ªè¿è¡Œ Spring Boot å¾®æœåŠ¡çš„å®¹å™¨åº”ç”¨ç¨‹åºã€‚æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å°†é‡ç‚¹å…³æ³¨å¦‚ä½•é…ç½®å’Œå®æ–½å¥åº·æ£€æŸ¥ï¼Œä»¥ç¡®ä¿åº”ç”¨ç¨‹åºçš„ç¨³å®šæ€§å’Œå¯é æ€§ã€‚</p><h2 id=5-é…ç½®å¥åº·æ£€æŸ¥><a href=#5-%e9%85%8d%e7%bd%ae%e5%81%a5%e5%ba%b7%e6%a3%80%e6%9f%a5>#</a>
5. é…ç½®å¥åº·æ£€æŸ¥</h2><p>åœ¨ Kubernetes ä¸­ï¼Œå¥åº·æ£€æŸ¥é€šè¿‡ liveness æ¢é’ˆå’Œ readiness æ¢é’ˆæ¥å®ç°ã€‚liveness æ¢é’ˆç”¨äºæ£€æŸ¥åº”ç”¨ç¨‹åºæ˜¯å¦å¤„äºè¿è¡ŒçŠ¶æ€ï¼Œè€Œ readiness æ¢é’ˆç”¨äºæ£€æŸ¥åº”ç”¨ç¨‹åºæ˜¯å¦å·²å‡†å¤‡å¥½æ¥æ”¶æµé‡ã€‚ä¸‹é¢æˆ‘ä»¬å°†åˆ†åˆ«ä»‹ç»å¦‚ä½•åœ¨ Spring Boot åº”ç”¨ç¨‹åºä¸­å®ç°è¿™ä¸¤ç§æ¢é’ˆï¼Œå¹¶åœ¨ Kubernetes ä¸­è¿›è¡Œé…ç½®ã€‚</p><ul><li><strong>å®ç° liveness æ¢é’ˆï¼š</strong> åœ¨ Spring Boot åº”ç”¨ç¨‹åºä¸­å®ç° liveness æ¢é’ˆéå¸¸ç®€å•ï¼Œæˆ‘ä»¬åªéœ€åˆ›å»ºä¸€ä¸ªç«¯ç‚¹æ¥å£ï¼Œç”¨äºæ£€æŸ¥åº”ç”¨ç¨‹åºçš„è¿è¡ŒçŠ¶æ€å³å¯ã€‚ä¾‹å¦‚ï¼Œæˆ‘ä»¬å¯ä»¥åˆ›å»ºä¸€ä¸ª <code>/actuator/health</code> çš„ç«¯ç‚¹ï¼Œç”¨äºè¿”å›åº”ç”¨ç¨‹åºçš„å¥åº·çŠ¶æ€ã€‚åœ¨ Spring Boot åº”ç”¨ç¨‹åºä¸­ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ Spring Boot Actuator æ¨¡å—æ¥å®ç°è¿™ä¸€åŠŸèƒ½ã€‚åœ¨ <code>application.properties</code> é…ç½®æ–‡ä»¶ä¸­æ·»åŠ ä»¥ä¸‹é…ç½®ï¼š</li></ul><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-properties data-lang=properties><span class=line><span class=cl><span class=na>management.endpoint.health.enabled</span><span class=o>=</span><span class=s>true</span>
</span></span><span class=line><span class=cl><span class=na>management.endpoint.health.probes.enabled</span><span class=o>=</span><span class=s>true</span>
</span></span><span class=line><span class=cl><span class=na>management.endpoints.web.exposure.include</span><span class=o>=</span><span class=s>health</span>
</span></span></code></pre></td></tr></table></div></div><p>ç„¶åï¼Œæˆ‘ä»¬å°±å¯ä»¥è®¿é—® <code>/actuator/health</code> ç«¯ç‚¹æ¥æ£€æŸ¥åº”ç”¨ç¨‹åºçš„è¿è¡ŒçŠ¶æ€äº†ã€‚</p><ul><li><strong>å®ç° readiness æ¢é’ˆï¼š</strong> ä¸ liveness æ¢é’ˆç±»ä¼¼ï¼Œå®ç° readiness æ¢é’ˆä¹Ÿå¾ˆç®€å•ã€‚æˆ‘ä»¬å¯ä»¥åˆ›å»ºä¸€ä¸ªç±»ä¼¼çš„ç«¯ç‚¹æ¥å£ï¼Œç”¨äºæ£€æŸ¥åº”ç”¨ç¨‹åºæ˜¯å¦å·²å‡†å¤‡å¥½æ¥æ”¶æµé‡ã€‚ä¾‹å¦‚ï¼Œæˆ‘ä»¬å¯ä»¥åˆ›å»ºä¸€ä¸ª <code>/actuator/readiness</code> çš„ç«¯ç‚¹ï¼Œç”¨äºè¿”å›åº”ç”¨ç¨‹åºçš„å°±ç»ªçŠ¶æ€ã€‚åŒæ ·åœ°ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ Spring Boot Actuator æ¨¡å—æ¥å®ç°è¿™ä¸€åŠŸèƒ½ï¼Œåœ¨ <code>application.properties</code> é…ç½®æ–‡ä»¶ä¸­æ·»åŠ ä»¥ä¸‹é…ç½®ï¼š</li></ul><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-properties data-lang=properties><span class=line><span class=cl><span class=na>management.endpoint.health.enabled</span><span class=o>=</span><span class=s>true</span>
</span></span><span class=line><span class=cl><span class=na>management.endpoint.health.probes.enabled</span><span class=o>=</span><span class=s>true</span>
</span></span><span class=line><span class=cl><span class=na>management.endpoint.health.probes.include</span><span class=o>=</span><span class=s>readiness</span>
</span></span></code></pre></td></tr></table></div></div><p>ç„¶åï¼Œæˆ‘ä»¬å°±å¯ä»¥è®¿é—® <code>/actuator/readiness</code> ç«¯ç‚¹æ¥æ£€æŸ¥åº”ç”¨ç¨‹åºçš„å°±ç»ªçŠ¶æ€äº†ã€‚</p><ul><li><strong>åœ¨ Kubernetes ä¸­é…ç½®å¥åº·æ£€æŸ¥ï¼š</strong> åœ¨ Kubernetes çš„éƒ¨ç½²é…ç½®æ–‡ä»¶ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ <code>livenessProbe</code> å’Œ <code>readinessProbe</code> å­—æ®µæ¥å®šä¹‰å®¹å™¨çš„å¥åº·æ£€æŸ¥ã€‚ä¾‹å¦‚ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ä»¥ä¸‹é…ç½®æ¥å®šä¹‰ä¸€ä¸ª liveness æ¢é’ˆï¼š</li></ul><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=nt>livenessProbe</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>httpGet</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>path</span><span class=p>:</span><span class=w> </span><span class=l>/actuator/health</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>port</span><span class=p>:</span><span class=w> </span><span class=m>8080</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>initialDelaySeconds</span><span class=p>:</span><span class=w> </span><span class=m>30</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>periodSeconds</span><span class=p>:</span><span class=w> </span><span class=m>10</span><span class=w>
</span></span></span></code></pre></td></tr></table></div></div><p>è¿™ä¸ªé…ç½®å°†ä¼šåœ¨å®¹å™¨å¯åŠ¨åç­‰å¾… 30 ç§’åå¼€å§‹è¿›è¡Œ liveness æ¢æµ‹ï¼Œæ¯éš” 10 ç§’è¿›è¡Œä¸€æ¬¡æ¢æµ‹ï¼Œæ£€æŸ¥ <code>/actuator/health</code> ç«¯ç‚¹çš„è¿”å›çŠ¶æ€ã€‚</p><p>ç±»ä¼¼åœ°ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥ä½¿ç”¨ç±»ä¼¼çš„é…ç½®æ¥å®šä¹‰ä¸€ä¸ª readiness æ¢é’ˆã€‚</p><p>é€šè¿‡ä¸Šè¿°æ­¥éª¤ï¼Œæˆ‘ä»¬å°±æˆåŠŸåœ°åœ¨ Spring Boot åº”ç”¨ç¨‹åºä¸­å®ç°äº† liveness æ¢é’ˆå’Œ readiness æ¢é’ˆï¼Œå¹¶åœ¨ Kubernetes ä¸­è¿›è¡Œäº†ç›¸åº”çš„é…ç½®ã€‚æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å°†è¿›è¡Œå®æˆ˜æ¼”ç»ƒï¼ŒéªŒè¯å¥åº·æ£€æŸ¥çš„é…ç½®æ˜¯å¦ç”Ÿæ•ˆï¼Œä»¥åŠå¦‚ä½•ä½¿ç”¨ kubectl å‘½ä»¤æ¥æŸ¥çœ‹åº”ç”¨ç¨‹åºçš„å¥åº·çŠ¶æ€ã€‚</p><h2 id=6-éªŒè¯><a href=#6-%e9%aa%8c%e8%af%81>#</a>
6. éªŒè¯</h2><p>åœ¨æœ¬èŠ‚ä¸­ï¼Œæˆ‘ä»¬å°†æ¼”ç¤ºå¦‚ä½•ä½¿ç”¨ kubectl å‘½ä»¤æ¥æŸ¥çœ‹åº”ç”¨ç¨‹åºçš„å¥åº·çŠ¶æ€ï¼Œå¹¶éªŒè¯å¥åº·æ£€æŸ¥çš„é…ç½®æ˜¯å¦ç”Ÿæ•ˆã€‚</p><ul><li><strong>æŸ¥çœ‹ liveness æ¢é’ˆçŠ¶æ€ï¼š</strong> ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤å¯ä»¥æŸ¥çœ‹åº”ç”¨ç¨‹åºçš„ liveness æ¢é’ˆçŠ¶æ€ï¼š</li></ul><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>kubectl describe pod &lt;pod_name&gt;
</span></span></code></pre></td></tr></table></div></div><p>è¯¥å‘½ä»¤å°†è¾“å‡ºåŒ…å«å®¹å™¨çŠ¶æ€å’Œäº‹ä»¶çš„è¯¦ç»†ä¿¡æ¯ã€‚åœ¨è¾“å‡ºç»“æœä¸­ï¼Œå¯ä»¥æ‰¾åˆ°æœ‰å…³ liveness æ¢é’ˆçš„ç›¸å…³ä¿¡æ¯ï¼Œä¾‹å¦‚æ¢é’ˆçš„æ‰§è¡Œç»“æœå’Œæœ€åä¸€æ¬¡æ‰§è¡Œçš„æ—¶é—´æˆ³ã€‚</p><ul><li><strong>éªŒè¯ readiness æ¢é’ˆçŠ¶æ€ï¼š</strong> ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤å¯ä»¥éªŒè¯åº”ç”¨ç¨‹åºçš„ readiness æ¢é’ˆçŠ¶æ€ï¼š</li></ul><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>kubectl get pods
</span></span></code></pre></td></tr></table></div></div><p>è¯¥å‘½ä»¤å°†åˆ—å‡ºæ‰€æœ‰è¿è¡Œä¸­çš„ Podï¼Œå¹¶æ˜¾ç¤ºå®ƒä»¬çš„çŠ¶æ€ã€‚é€šè¿‡è§‚å¯Ÿ READY åˆ—ä¸­çš„å€¼ï¼Œå¯ä»¥äº†è§£åˆ°æ¯ä¸ª Pod æ˜¯å¦å·²å‡†å¤‡å¥½æ¥æ”¶æµé‡ã€‚</p><p>é€šè¿‡ä¸Šè¿°å‘½ä»¤ï¼Œæˆ‘ä»¬å¯ä»¥è½»æ¾åœ°éªŒè¯å¥åº·æ£€æŸ¥çš„é…ç½®æ˜¯å¦ç”Ÿæ•ˆï¼Œå¹¶äº†è§£åº”ç”¨ç¨‹åºçš„å¥åº·çŠ¶æ€ã€‚å¦‚æœå‡ºç°å¥åº·æ£€æŸ¥å¤±è´¥æˆ–å¼‚å¸¸çš„æƒ…å†µï¼Œæˆ‘ä»¬è¿˜å¯ä»¥ä½¿ç”¨ kubectl å‘½ä»¤æ¥è¿›è¡Œæ•…éšœæ’é™¤å’Œè°ƒè¯•ï¼Œä»¥æ‰¾å‡ºé—®é¢˜çš„æ ¹æºå¹¶åŠæ—¶å¤„ç†ã€‚</p><h2 id=7-æ€»ç»“><a href=#7-%e6%80%bb%e7%bb%93>#</a>
7. æ€»ç»“</h2><p>é€šè¿‡æœ¬æ–‡çš„å®æˆ˜æŒ‡å—ï¼Œæˆ‘ä»¬æ·±å…¥æ¢è®¨äº†åœ¨ Kubernetes ç¯å¢ƒä¸­éƒ¨ç½² Spring Boot å¾®æœåŠ¡å¹¶å®æ–½å¥åº·æ£€æŸ¥çš„æ–¹æ³•å’Œæ­¥éª¤ã€‚æˆ‘ä»¬é¦–å…ˆä»‹ç»äº†å¥åº·æ£€æŸ¥çš„æ¦‚å¿µå’Œé‡è¦æ€§ï¼Œç„¶åè¯¦ç»†è®²è§£äº†å¦‚ä½•åœ¨ Spring Boot åº”ç”¨ç¨‹åºä¸­å®ç° liveness æ¢é’ˆå’Œ readiness æ¢é’ˆï¼Œå¹¶åœ¨ Kubernetes ä¸­è¿›è¡Œé…ç½®ã€‚æœ€åï¼Œæˆ‘ä»¬è¿›è¡Œäº†å®æˆ˜æ¼”ç»ƒï¼ŒéªŒè¯äº†å¥åº·æ£€æŸ¥çš„é…ç½®æ˜¯å¦ç”Ÿæ•ˆï¼Œå¹¶äº†è§£äº†å¦‚ä½•ä½¿ç”¨ kubectl å‘½ä»¤æ¥æŸ¥çœ‹åº”ç”¨ç¨‹åºçš„å¥åº·çŠ¶æ€å’Œè¿›è¡Œæ•…éšœæ’é™¤ã€‚</p><p>é€šè¿‡æ­£ç¡®åœ°é…ç½®å’Œå®æ–½å¥åº·æ£€æŸ¥ï¼Œæˆ‘ä»¬å¯ä»¥æœ‰æ•ˆåœ°ç›‘æ§å’Œç®¡ç†åº”ç”¨ç¨‹åºçš„çŠ¶æ€ï¼ŒåŠæ—¶å‘ç°å¹¶å¤„ç†æ½œåœ¨çš„æ•…éšœæƒ…å†µï¼Œä»è€Œç¡®ä¿æ•´ä¸ªç³»ç»Ÿçš„æ­£å¸¸è¿è¡Œã€‚å¸Œæœ›æœ¬æ–‡å¯¹æ‚¨ç†è§£å’ŒæŒæ¡äº‘åŸç”Ÿå¥åº·æ£€æŸ¥çš„å®è·µæŠ€å·§æœ‰æ‰€å¸®åŠ©ï¼Œä¹Ÿæ¬¢è¿æ‚¨åœ¨å®é™…åº”ç”¨ä¸­è¿›è¡Œè¿›ä¸€æ­¥çš„å°è¯•å’Œæ¢ç´¢ã€‚</p><h2 id=å‚è€ƒèµ„æ–™><a href=#%e5%8f%82%e8%80%83%e8%b5%84%e6%96%99>#</a>
å‚è€ƒèµ„æ–™</h2><ul><li><a class=link href=https://kubernetes.io/zh-cn/docs/concepts/workloads/pods/pod-lifecycle/#container-probes target=_blank rel=noopener>https://kubernetes.io/zh-cn/docs/concepts/workloads/pods/pod-lifecycle/#container-probes</a></li><li><a class=link href=https://kubernetes.io/zh-cn/docs/tasks/configure-pod-container/configure-liveness-readiness-startup-probes target=_blank rel=noopener>https://kubernetes.io/zh-cn/docs/tasks/configure-pod-container/configure-liveness-readiness-startup-probes</a></li><li><a class=link href=https://docs.spring.io/spring-boot/docs/current/reference/html/actuator.html#actuator.endpoints.kubernetes-probes target=_blank rel=noopener>https://docs.spring.io/spring-boot/docs/current/reference/html/actuator.html#actuator.endpoints.kubernetes-probes</a></li><li><a class=link href=https://docs.spring.io/spring-boot/docs/current/reference/html/deployment.html#deployment.cloud.kubernetes.container-lifecycle target=_blank rel=noopener>https://docs.spring.io/spring-boot/docs/current/reference/html/deployment.html#deployment.cloud.kubernetes.container-lifecycle</a></li><li><a class=link href=https://docs.spring.io/spring-boot/docs/current/reference/html/web.html#web.graceful-shutdown target=_blank rel=noopener>https://docs.spring.io/spring-boot/docs/current/reference/html/web.html#web.graceful-shutdown</a></li></ul></section><footer class=article-footer><section class=article-tags><a href=/tags/cloud-native/>Cloud Native</a>
<a href=/tags/kubernetes/>Kubernetes</a>
<a href=/tags/spring-boot/>Spring Boot</a>
<a href=/tags/%E5%81%A5%E5%BA%B7%E6%A3%80%E6%9F%A5/>å¥åº·æ£€æŸ¥</a></section><section class=article-lastmod><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-clock" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="12" r="9"/><polyline points="12 7 12 12 15 15"/></svg>
<span>æœ€åæ›´æ–°äº Apr 20, 2024 21:00 UTC</span></section></footer></article><aside class=related-content--wrapper><h2 class=section-title>ç›¸å…³æ–‡ç« </h2><div class=related-content><div class="flex article-list--tile"><article class=has-image><a href=/p/ip-protocal-migration/><div class=article-image><img src=/p/ip-protocal-migration/cover.c514d916917173a48a42e0114b469961_hud7e36f7e20e71be184458283bdae4646_55974_250x150_fill_q75_box_smart1.jpg width=250 height=150 loading=lazy alt="Featured image of post Spring Cloudåº”ç”¨å¦‚ä½•å¹³æ»‘è¿ç§»è‡³IPv6?" data-key=ip-protocal-migration data-hash="md5-xRTZFpFxc6SKQuARS0aZYQ=="></div><div class=article-details><h2 class=article-title>Spring Cloudåº”ç”¨å¦‚ä½•å¹³æ»‘è¿ç§»è‡³IPv6?</h2></div></a></article></div></div></aside><div class=disqus-container><div id=disqus_thread></div><script>window.disqus_config=function(){},function(){if(["localhost","127.0.0.1"].indexOf(window.location.hostname)!=-1){document.getElementById("disqus_thread").innerHTML="Disqus comments not available by default when the website is previewed locally.";return}var t=document,e=t.createElement("script");e.async=!0,e.src="//xiuwei.disqus.com/embed.js",e.setAttribute("data-timestamp",+new Date),(t.head||t.body).appendChild(e)}()</script><noscript>Please enable JavaScript to view the <a href=https://disqus.com/?ref_noscript>comments powered by Disqus.</a></noscript><a href=https://disqus.com class=dsq-brlink>comments powered by <span class=logo-disqus>Disqus</span></a></div><style>.disqus-container{background-color:var(--card-background);border-radius:var(--card-border-radius);box-shadow:var(--shadow-l1);padding:var(--card-padding)}</style><script>window.addEventListener("onColorSchemeChange",e=>{typeof DISQUS=="object"&&DISQUS.reset({reload:!0})})</script><footer class=site-footer><section class=copyright>&copy;
2020 -
2024 å“ˆçš®çš„è‡ªè¨€è‡ªè¯­</section><section class=powerby>ä½¿ç”¨ <a href=https://gohugo.io/ target=_blank rel=noopener>Hugo</a> æ„å»º<br>ä¸»é¢˜ <b><a href=https://github.com/CaiJimmy/hugo-theme-stack target=_blank rel=noopener data-version=3.25.0>Stack</a></b> ç”± <a href=https://jimmycai.com target=_blank rel=noopener>Jimmy</a> è®¾è®¡</section></footer><div class=pswp tabindex=-1 role=dialog aria-hidden=true><div class=pswp__bg></div><div class=pswp__scroll-wrap><div class=pswp__container><div class=pswp__item></div><div class=pswp__item></div><div class=pswp__item></div></div><div class="pswp__ui pswp__ui--hidden"><div class=pswp__top-bar><div class=pswp__counter></div><button class="pswp__button pswp__button--close" title="Close (Esc)"></button>
<button class="pswp__button pswp__button--share" title=Share></button>
<button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>
<button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button><div class=pswp__preloader><div class=pswp__preloader__icn><div class=pswp__preloader__cut><div class=pswp__preloader__donut></div></div></div></div></div><div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap"><div class=pswp__share-tooltip></div></div><button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
</button>
<button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)"></button><div class=pswp__caption><div class=pswp__caption__center></div></div></div></div></div><script src=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.js integrity="sha256-ePwmChbbvXbsO02lbM3HoHbSHTHFAeChekF1xKJdleo=" crossorigin=anonymous defer></script><script src=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe-ui-default.min.js integrity="sha256-UKkzOn/w1mBxRmLLGrSeyB4e1xbrp4xylgAWb3M42pU=" crossorigin=anonymous defer></script><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/default-skin/default-skin.min.css crossorigin=anonymous><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.css crossorigin=anonymous></main></div><script src=https://cdn.jsdelivr.net/npm/node-vibrant@3.1.6/dist/vibrant.min.js integrity="sha256-awcR2jno4kI5X0zL8ex0vi2z+KMkF24hUW8WePSA9HM=" crossorigin=anonymous></script><script type=text/javascript src=/ts/main.js defer></script><script>(function(){const e=document.createElement("link");e.href="https://fonts.googleapis.com/css2?family=Lato:wght@300;400;700&display=swap",e.type="text/css",e.rel="stylesheet",document.head.appendChild(e)})()</script><script>document.querySelectorAll(".powerby").forEach(e=>{e.style.display="none"})</script></body></html>